#!/usr/bin/with-contenv bash

# remove old samples
find /config/nginx/ \
    -name "*.conf.sample" \
    -type f \
    -delete

# copy new samples
find /defaults/nginx/ \
    -maxdepth 1 \
    -name "*.conf.sample" \
    -type f \
    -exec cp "{}" /config/nginx/ +

if [[ -d /defaults/nginx/http-confs/ ]]; then
    find /defaults/nginx/http-confs/ \
        -maxdepth 1 \
        -name "*.conf.sample" \
        -type f \
        -exec cp "{}" /config/nginx/http-confs/ +
fi

if [[ -d /defaults/nginx/location-confs/ ]]; then
    find /defaults/nginx/location-confs/ \
        -maxdepth 1 \
        -name "*.conf.sample" \
        -type f \
        -exec cp "{}" /config/nginx/location-confs/ +
fi

if [[ -d /defaults/nginx/server-confs/ ]]; then
    find /defaults/nginx/server-confs/ \
        -maxdepth 1 \
        -name "*.conf.sample" \
        -type f \
        -exec cp "{}" /config/nginx/server-confs/ +
fi

if [[ -d /defaults/nginx/site-confs/ ]]; then
    find /defaults/nginx/site-confs/ \
        -maxdepth 1 \
        -name "*.conf.sample" \
        -type f \
        -exec cp "{}" /config/nginx/site-confs/ +
fi
